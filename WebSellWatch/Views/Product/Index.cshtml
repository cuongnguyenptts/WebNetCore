@model PagedList.Core.IPagedList<WebSellWatch.Models.Product>
@using PagedList.Core.Mvc
@{
    ViewData["TiTle"] = "Shop - " + ViewBag.CurrentPage;
    Layout = "~/Views/Shared/_Layout.cshtml";
    int PageCurrent = ViewBag.CurrentPage;
    int PageNext = PageCurrent + 1;

}

<div class="shop_section shop_reverse" style="margin-top: 100px">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-12">
                <!--sidebar widget start-->
                <aside class="sidebar_widget">
                    <div class="widget_inner">
                        <div class="widget_list widget_categories">
                            <h2>Danh sách sản phẩm</h2>
                            <ul>
                                <li class="widget_sub_categories">
                                    <a href="javascript:void(0)" data-toggle="collapse" data-target="#men">Hãng</a>
                                    <ul class="widget_dropdown_categories collapse show" id="men">
                                        <li><a href="#">Patek Philippe<span>20</span></a></li>
                                        <li><a href="#">TAG Heuer<span>5</span></a></li>
                                        <li><a href="#">Rolex <span>10</span></a></li>
                                        <li><a href="#"> Hublot <span>30</span></a></li>
                                        <li><a href="#"> CALVIN KLEIN <span>150</span></a></li>
                                    </ul>
                                </li>

                            </ul>
                        </div>
                        <div class="widget_list widget_filter">
                            <h2>Giá</h2>
                            <div class="filter__list slider_range">
                                <h3>Giá</h3>
                                <form action="#">
                                    <div id="slider-range"></div>
    
                                    <input type="text" name="text" id="amount" />
                                </form>
                            </div>
                            <div class="filter__list widget_color">
                                <h3>Màu</h3>
                                <ul>
                                    <li>
                                        <input type="checkbox">
                                        <span class="checkmark color1"></span>
                                    </li>
                                    <li>
                                        <input type="checkbox">
                                        <span class="checkmark color2"></span>
                                    </li>
                                    <li>
                                        <input type="checkbox">
                                        <span class="checkmark color3"></span>
                                    </li>
                                    <li>
                                        <input type="checkbox">
                                        <span class="checkmark color4"></span>
                                    </li>                              
                                </ul>
                            </div>
                        </div>
                       
                    </div>
                </aside>
                <!--sidebar widget end-->
            </div>
            <div class="col-lg-9 col-md-12">
                <!--shop wrapper start-->
                <!--breadcrumbs area start-->
                <div class="breadcrumb_content">
                    <ul>
                        <li><a href="index.html">Trang Chủ</a></li>
                        <li>shop</li>
                    </ul>
                </div>

                <!--shop toolbar start-->
                <div class="shop_toolbar_wrapper d-flex justify-content-between align-items-center">
                    <div class="page_amount">
                        <p><span>@Model.Count()</span> Sản phẩm được tìm thấy</p>
                    </div>
                    <div class="toolbar_btn_wrapper d-flex align-items-center">
                        <div class="shop_toolbar_btn">
                            <ul class="d-flex align-items-center">
                                <li><a href="#" class="active btn-grid-3" data-role="grid_3" data-tippy="3" data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="top"><i class="ion-grid"></i></a></li>

                                <li><a href="#" class="btn-list" data-role="grid_list" data-tippy="List" data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="top"><i class="ion-navicon"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--shop toolbar end-->
                <div class="row shop_wrapper">
                    @if (Model != null && Model.Count() > 0)
                    {
                        foreach (var item in Model)
                        {
                            string url = $"/{item.Alias}-{item.ProductId}.html";
                            <div class="col-lg-4 col-md-4 col-sm-6 col-6 ">
                                <div class="single_product">
                                    <div class="product_thumb">
                                        <a href="@url">
                                            <img style="width:274px; height:274px" class="primary_img" src="~/images/products/@item.Thumb" alt="@item.Title">
                                        </a>
                                        <div class="product_action">
                                            <ul>
                                                <li class="wishlist">
                                                    <a href="#" data-tippy="Wishlist" data-tippy-inertia="true" data-tippy-delay="50"
                                                       data-tippy-arrow="true" data-tippy-placement="left"><i class="icon-heart icons"></i></a>
                                                </li>

                                                <li class="quick_view"><a data-toggle="modal" data-target="#modal_box" data-tippy="Quick View" href="#" data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="left"><i class="icon-size-fullscreen icons"></i></a></li>
                                                <li class="compare">
                                                    <a data-tippy="Compare" href="#" data-tippy-inertia="true" data-tippy-delay="50"
                                                       data-tippy-arrow="true" data-tippy-placement="left"><i class="icon-refresh icons"></i></a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="product_label">
                                            <span>-18%</span>
                                        </div>
                                    </div>
                                    <div class="product_content grid_content text-center">
                                        <div class="product_ratting">
                                            <ul class="d-flex justify-content-center">
                                                <li><a href="#"><i class="ion-android-star"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star"></i></a></li>
                                                <li><span>(2)</span></li>
                                            </ul>
                                        </div>
                                        <h4 class="product_name"><a href="@url">@item.ProductName</a></h4>
                                        <div class="price_box">
                                            <span class="current_price">@item.Price</span>
                                        </div>
@*                                        <div class="add_to_cart">
                                            <a class="btn btn-primary" href="#" data-tippy="Add To Cart" data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="top">Add To Cart</a>
                                        </div>*@
                                    </div>
                                    <div class="product_list_content">
                                        <h4 class="product_name"><a href="@url">@item.ProductName</a></h4>
                                        <p><a href="#">shows</a></p>
                                        <div class="price_box">
                                            <span class="current_price">@item.Price</span>
                                        </div>
                                        <div class="product_desc">
                                            <p>@item.ShortDesc</p>
                                        </div>
                                        <div class="add-to-cart">
                                            <a asp-controller="ShoppingCar" asp-action="AddToCart" class="add-to-cart btn btn-primary" data-tippy="Add To Cart" data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="top">Add To Cart</a>
                                                <input hidden asp-for="@item.ProductId"/>                                      
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
                <div class="pagination_style pagination justify-content-center">
                    <ul class="d-flex">
                        <li><a href="#"> << </a></li>
                        <li><a class="current" list="@Model" options="@PagedListRenderOptions.Bootstrap4PageNumbersOnly" asp-area="" asp-controller="Product" asp-action="Index">1</a></li>
                        <li><a class="#" >2</a></li>
                        <li><a class="#">3</a></li>
                        <li><a href="#">>></a></li>
                    </ul>
                </div>

                @if (Model != null && Model.Count() > 0)
                {
                    foreach (var item in Model)
                    {
                        <div class="modal fade" id="modal_box" tabindex="-1" role="dialog" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true"><i class="ion-android-close"></i></span>
                                    </button>
                                    <div class="modal_body">
                                        <div class="container">
                                            <div class="row">
                                                <div class="col-lg-6 col-md-6 col-sm-12">
                                                    <div class="modal_zoom_gallery">
                                                        <div class="product_zoom_thumb">
                                                            <img src="~/images/products/@item.Thumb" alt="@item.Title">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-md-6 col-sm-12">
                                                    <div class="modal_right">
                                                        <div class="modal_title mb-10">
                                                            <h2>@item.ProductName</h2>>
                                                        </div>
                                                        <div class="modal_price mb-10">
                                                            <span class="current_price">@item.Price.Value.ToString("#,##0") VNĐ</span>
                                                            @if (item.Discount > 0)
                                                            {
                                                                <span class="old_price">@item.Discount.Value.ToString("#,##0") VNĐ</span>
                                                            }

                                                        </div>
                                                        <div class="modal_description mb-15">
                                                            <p>
                                                                @item.Description
                                                            </p>
                                                        </div>
                                                        <div class="variants_selects">
                                                            <div class="variants_color">
                                                                <h2>color</h2>
                                                                <select class="select_option">
                                                                    <option selected value="1">purple</option>
                                                                    <option value="1">violet</option>
                                                                    <option value="1">black</option>
                                                                    <option value="1">pink</option>
                                                                    <option value="1">orange</option>
                                                                </select>
                                                            </div>
                                                            <div class="modal_add_to_cart">
                                                                <form action="#">
                                                                    <input min="1" max="100" step="1" value="1" type="number">
                                                                    <button type="submit">add to cart</button>
                                                                </form>
                                                            </div>
                                                        </div>
                                                        <div class="modal_social">
                                                            <h2>Share this product</h2>
                                                            <ul>
                                                                <li class="facebook"><a href="#"><i class="fa fa-facebook"></i></a></li>
                                                                <li class="twitter"><a href="#"><i class="fa fa-twitter"></i></a></li>
                                                                <li class="pinterest"><a href="#"><i class="fa fa-pinterest"></i></a></li>
                                                                <li class="google-plus">
                                                                    <a href="#"><i class="fa fa-google-plus"></i></a>
                                                                </li>
                                                                <li class="linkedin"><a href="#"><i class="fa fa-linkedin"></i></a></li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }

                   
                <!--shop toolbar end-->
                <!--shop wrapper end-->
            </div>
        </div>
    </div>
</div>
<section class="newsletter_section newsletter_padding border-top">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="newsletter_inner d-flex justify-content-between align-items-center">
                    <div class="newsletter_text">
                        <h3>Đăng kí ngay</h3>
                        <p>Nhận tin tức mới nhất bản tin của chúng tôi</p>
                    </div>
                    <div class="newsletter_subscribe">
                        <form id="mc-form">
                            <input class="border-0" id="mc-email" type="email" autocomplete="off" placeholder="Enter your email address">
                            <i class="icon-envelope-open icons"></i>
                            <button class="border-0" id="mc-submit">Đăng Kí</button>
                        </form>
                        <!-- mailchimp-alerts Start -->
                        <div class="mailchimp-alerts text-centre">
                            <div class="mailchimp-submitting"></div><!-- mailchimp-submitting end -->
                            <div class="mailchimp-success"></div><!-- mailchimp-success end -->
                            <div class="mailchimp-error"></div><!-- mailchimp-error end -->
                        </div><!-- mailchimp-alerts end -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--newsletter section end-->
<!--shop  area end-->
@section Scripts{
@*    <script>
        $(document).ready(function () {
            $(function () {
                $(".add-to-cart").click(function () {
                    var productid = $('#ProductId').val();
                    var soLuong = $('#txtsoLuong').val();
                    $.ajax({
                        url: '/api/cart/add',
                        type: "POST",
                        dataType: "JSON",
                        data: {
                            productID: productid,
                            amount: soLuong
                        },
                        success: function (response) {
                            if (response.result == 'Redirect') {
                                window.location = response.url;
                            }
                            else {
                                loadHeaderCart(); //Add Product success
                                location.reload();
                            }
                            console.log(response); // log to the console to see whether it worked
                        },
                        error: function (error) {
                            alert("There was an error posting the data to the server: " + error.responseText);
                        }
                    });
                });

        $(".removecart").click(function () {
                var productid = $(this).attr("data-productid");
                $.ajax({
                url: "api/cart/remove",
                type: "POST",
                dataType: "JSON",
                data: { productID: productid },
                success: function (result) {
                if (result.success) {
                loadHeaderCart();//Reload lai gio hang
                location.reload();
                }
                },
                error: function (rs) {
                alert("Remove Cart Error !")
                }
                });
                });
                        });
            function loadHeaderCart() {
                $('#miniCart').load("/AjaxContent/HeaderCart");
                $('#numberCart').load("/AjaxContent/NumberCart");
            }
        });
    </script>*@
}