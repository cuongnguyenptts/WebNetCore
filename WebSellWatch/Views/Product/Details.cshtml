@model WebSellWatch.Models.Product

@{
    ViewData["Title"] = Model.Title;
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<Product> lsProduct = ViewBag.SanPham;
}

<div class="breadcrumbs_area breadcrumbs_product" style="margin-top: 170px">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="breadcrumb_content">
                    <ul>
                        <li><a href="index.html">home</a></li>
                        <li><a href="shop.html">shop</a></li>
                        <li>@Model.Title</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!--breadcrumbs area end-->
<!--product details start-->
<div class="product_details mb-135">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6">
                <div class="product_zoom_gallery">
                    <div class="zoom_gallery_inner d-flex">
                        <div class="zoom_tab_img" style="height:100px; width:100px">
                            <a class="zoom_tabimg_list" href="javascript:void(0)"><img src="~/images/products/@Model.Thumb" alt="tab-thumb"></a>
                            <a class="zoom_tabimg_list" href="javascript:void(0)"><img src="~/images/products/@Model.Thumb" alt="tab-thumb"></a>
                            <a class="zoom_tabimg_list" href="javascript:void(0)"><img src="~/images/products/@Model.Thumb" alt="tab-thumb"></a>
                            <a class="zoom_tabimg_list" href="javascript:void(0)"><img src="~/images/products/@Model.Thumb" alt="tab-thumb"></a>
                             <a class="zoom_tabimg_list" href="javascript:void(0)"><img src="~/images/products/@Model.Thumb" alt="tab-thumb"></a>
                        </div>
                        <div class="product_zoom_main_img">
                            <div class="product_zoom_thumb">
                                <img style="height:550px; width:100%" data-image="~/images/products/@Model.Thumb" src="~/images/products/@Model.Thumb" alt="">
                            </div>
                            <div class="product_zoom_thumb">
                                <img style="height:550px" data-image="~/images/products/@Model.Thumb" src="~/images/products/@Model.Thumb" alt="">
                            </div>
                            <div class="product_zoom_thumb">
                                <img style="height:550px" data-image="~/images/products/@Model.Thumb" src="~/images/products/@Model.Thumb" alt="">
                            </div>
                            <div class="product_zoom_thumb">
                                <img style="height:550px" data-image="~/images/products/@Model.Thumb" src="~/images/products/@Model.Thumb" alt="">
                            </div>
                            <div class="product_zoom_thumb">
                                <img style="height:550px" data-image="~/images/products/@Model.Thumb" src="~/images/products/@Model.Thumb" alt="">
                            </div>
                            <div class="product_zoom_thumb">
                                <img style="height:550px" data-image="~/images/products/@Model.Thumb" src="~/images/products/@Model.Thumb" alt="">
                            </div>
                            <div class="product_zoom_thumb">
                                <img style="height:550px" data-image="~/images/products/@Model.Thumb" src="~/images/products/@Model.Thumb" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="product_d_right">
                    <form action="" method="post">
                        <h1>@Model.ProductName</h1>
                        <div class="product_ratting_review d-flex align-items-center">
                            <div class=" product_ratting">
                                <ul class="d-flex">
                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                </ul>
                            </div>
                            <div class="product_review">
                                <ul class="d-flex">
                                    <li>4 reviews</li>
                                </ul>
                            </div>
                        </div>
                        <div class="price_box">
                            <span class="current_price">@Model.Price.Value.ToString("#,##0") VNĐ</span>
                        </div>
                        <div class="product_availalbe">
                            <ul class="d-flex">
                                <li>
                                    Availalbe:                                     
                                    <span class="stock">
                                        @if (Model.UnitsInStock.Value > 0)
                                        {
                                            <div class="d-flex align-items-center" style="text-align:center">
                                                <div class="badge badge-success badge-dot m-r-10"></div>
                                                <div>In Stock</div>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="d-flex align-items-center">
                                                <div class="badge badge-danger badge-dot m-r-10"></div>
                                                <div>Out Stock</div>
                                            </div>
                                        }
                                    </span>
                                </li>
                            </ul>
                        </div>
                        <div class="product_desc">
                            <p>@Model.ShortDesc </p>
                        </div>
                        <div class="product_variant">
                            <div class="filter__list widget_color d-flex align-items-center">
                                <h3>select color</h3>
                                <ul>
                                    <li>
                                        <input type="checkbox">
                                        <span class="checkmark color1"></span>
                                    </li>
                                    <li>
                                        <input type="checkbox">
                                        <span class="checkmark color2"></span>
                                    </li>
                                    <li>
                                        <input type="checkbox">
                                        <span class="checkmark color3"></span>
                                    </li>
                                    <li>
                                        <input type="checkbox">
                                        <span class="checkmark color5"></span>
                                    </li>
                                </ul>
                            </div>
                            <div class="filter__list widget_size d-flex align-items-center">
                                <h3>select size</h3>
                                <ul>
                                    <li>
                                        <a href="javascript:void(0)">S </a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)"> M</a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)">L</a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)"> XL</a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)">XLL</a>
                                    </li>
                                </ul>
                            </div>

                            <div class="variant_quantity_btn d-flex">
                                <div class="pro-qty border">
                                    <input id="txtsoLuong" name="txtsoLuong" class="cart-plus-minus-box" value="1" type="text">
                                </div>
                                <li class="add-to-cart">
                                    <button class="button btn btn-primary" type="submit"><i class="ion-android-add"></i> Add To Cart</button>
                                    <input hidden asp-for="ProductId" />
                                    <a class="wishlist" href="#"><i class="ion-ios-heart"></i></a>
                                </li>
                            </div>
                        </div>
                        <div class="product_sku">
                            <p><span>SKU: </span> #ABC123456</p>
                        </div>
                        <div class="product_tags d-flex">
                            <span>tags: </span>
                            <ul class="d-flex">
                                <li><a href="#">fashion,</a></li>
                                <li><a href="#">clothings,</a></li>
                                <li><a href="#">accessorires</a></li>
                            </ul>
                        </div>
                        <div class="priduct_social d-flex">
                            <span>SHARE: </span>
                            <ul>
                                <li><a href="#"><i class="ion-social-twitter"></i></a></li>
                                <li><a href="#"><i class="ion-social-facebook"></i></a></li>
                                <li><a href="#"><i class="ion-social-googleplus-outline"></i></a></li>
                                <li><a href="#"><i class="ion-social-pinterest"></i></a></li>
                                <li><a href="#"><i class="ion-social-instagram-outline"></i></a></li>
                            </ul>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!--product details end-->
<!--product info start-->
<div class="product_d_info mb-118">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="product_d_inner">
                    <div class="product_info_button border-bottom">
                        <ul class="nav" role="tablist">
                            <li>
                                <a class="active" data-toggle="tab" href="#info" role="tab" aria-controls="info" aria-selected="false">Mô tả sản phẩm</a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#reviews" role="tab" aria-controls="reviews" aria-selected="false">Bình luận</a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#video" role="tab" aria-controls="video" aria-selected="false">Custom Tab Video </a>
                            </li>

                        </ul>
                    </div>
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="info" role="tabpanel">
                            <div class="product_info_content">
                                <p>@Model.Description</p>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="reviews" role="tabpanel">
                            <div class="reviews_wrapper">
                                <h2>1 review for Donec eu furniture</h2>
                                <div class="reviews_comment_box">
                                    <div class="comment_thmb">
                                        <img src="~/assets/img/blog/comment2.jpg" alt="">
                                    </div>
                                    <div class="comment_text">
                                        <div class="reviews_meta">
                                            <div class="star_rating">
                                                <ul class="d-flex">
                                                    <li><a href="#"><i class="icon-star"></i></a></li>
                                                    <li><a href="#"><i class="icon-star"></i></a></li>
                                                    <li><a href="#"><i class="icon-star"></i></a></li>
                                                    <li><a href="#"><i class="icon-star"></i></a></li>
                                                    <li><a href="#"><i class="icon-star"></i></a></li>
                                                </ul>
                                            </div>
                                            <p><strong>admin </strong>- September 12, 2018</p>
                                            <span>roadthemes</span>
                                        </div>
                                    </div>

                                </div>
                                <div class="comment_title">
                                    <h2>Add a review </h2>
                                    <p>Your email address will not be published.  Required fields are marked </p>
                                </div>
                                <div class="product_ratting mb-10">
                                    <h3>Your rating</h3>
                                    <ul class="d-flex">
                                        <li><a href="#"><i class="icon-star"></i></a></li>
                                        <li><a href="#"><i class="icon-star"></i></a></li>
                                        <li><a href="#"><i class="icon-star"></i></a></li>
                                        <li><a href="#"><i class="icon-star"></i></a></li>
                                        <li><a href="#"><i class="icon-star"></i></a></li>
                                    </ul>
                                </div>
                                <div class="product_review_form">
                                    <form action="#">
                                        <div class="row">
                                            <div class="col-12">
                                                <label for="review_comment">Your review </label>
                                                <textarea name="comment" id="review_comment"></textarea>
                                            </div>
                                        </div>
                                        <button type="submit">Gửi</button>
                                    </form>
                                </div>
                            </div>
                        </div>
@*                        <div class="tab-pane fade" id="tags" role="tabpanel">
                            <div class="product_info_content">
                                <p>@Html.Raw(Model.Description)</p>
                            </div>
                        </div>*@
                        <div class="tab-pane fade" id="video" role="tabpanel">
                            <div class="product_tab_vidio text-center">
                                <iframe width="729" height="410" src="https://www.youtube.com/embed/BUWzX78Ye_8" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--product info end-->
<!--product area start-->
<section class="product_area related_products mb-118">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="section_title mb-50">
                    <h2>Sản phẩm tương tư</h2>
                </div>
            </div>
        </div>
        <div class="product_container row">
            <div class=" product_slick slick_slider_activation" data-slick='{
                    "slidesToShow": 4,
                    "slidesToScroll": 1,
                    "arrows": true,
                    "dots": false,
                    "autoplay": false,
                    "speed": 300,
                    "infinite": true,
                    "responsive":[
                      {"breakpoint":992, "settings": { "slidesToShow": 3 } },
                      {"breakpoint":768, "settings": { "slidesToShow": 2 } },
                      {"breakpoint":300, "settings": { "slidesToShow": 1 } }
                     ]
                }'>
                @if (lsProduct != null)
                {
                    foreach (var item in lsProduct)
                    {
                        string url = $"";
                        <div class="col-lg-3">
                            <article class="single_product">
                                <figure>
                                    <div class="product_thumb">
                                        <a href="@url">
                                            <img class="primary_img" src="~/images/products/@item.Thumb" alt="@item.Title">
                                        </a>
                                        <div class="product_action">
                                            <ul>
                                                <li class="wishlist">
                                                    <a href="#" data-tippy="Wishlist" data-tippy-inertia="true" data-tippy-delay="50"
                                                       data-tippy-arrow="true" data-tippy-placement="left"><i class="icon-heart icons"></i></a>
                                                </li>

                                                <li class="quick_view"><a data-toggle="modal" data-target="#modal_box" data-tippy="Quick View" href="#" data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="left"><i class="icon-size-fullscreen icons"></i></a></li>
                                                <li class="compare">
                                                    <a data-tippy="Compare" href="#" data-tippy-inertia="true" data-tippy-delay="50"
                                                       data-tippy-arrow="true" data-tippy-placement="left"><i class="icon-refresh icons"></i></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <figcaption class="product_content text-center">
                                        <div class="product_ratting">
                                            <ul class="d-flex justify-content-center">
                                                <li><a href="#"><i class="ion-android-star"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star"></i></a></li>
                                                <li><a href="#"><i class="ion-android-star"></i></a></li>
                                                <li><span>(4)</span></li>
                                            </ul>
                                        </div>
                                        <h4 class="product_name"><a href="@url">@item.ProductName</a></h4>
                                        <div class="price_box">
                                            <span class="current_price">@item.Price.Value.ToString("#,##0") VNĐ</span>
                                            @if (item.Discount > 0)
                                            {
                                                <span class="old_price">@item.Discount.Value.ToString("#,##0") VNĐ</span>
                                            }

                                        </div>
                                        <div class="add_to_cart">
                                            <a class="btn btn-primary" href="#" data-tippy="Add To Cart" data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="top">Add To Cart</a>
                                        </div>
                                    </figcaption>
                                </figure>
                            </article>
                        </div>
                    }
                }

            </div>
        </div>
    </div>
</section>
<!--product area end-->
@section Scripts{
    <script>
        $(document).ready(function () {
            $(function () {
                $(".add-to-cart").click(function () {
                    var productid = $('#ProductId').val();
                    var soLuong = $('#txtsoLuong').val();
                    $.ajax({
                        url: '/api/cart/add',
                        type: "POST",
                        dataType: "JSON",
                        data: {
                            productID: productid,
                            amount: soLuong
                        },
                        success: function (response) {
                            if (response.result == 'Redirect') {
                                window.location = response.url;
                            }
                            else {
                                loadHeaderCart(); //Add Product success
                                location.reload();
                            }
                            console.log(response); // log to the console to see whether it worked
                        },
                        error: function (error) {
                            alert("There was an error posting the data to the server: " + error.responseText);
                        }
                    });
                });

        @*$(".removecart").click(function () {
                var productid = $(this).attr("data-productid");
                $.ajax({
                url: "api/cart/remove",
                type: "POST",
                dataType: "JSON",
                data: { productID: productid },
                success: function (result) {
                if (result.success) {
                loadHeaderCart();//Reload lai gio hang
                location.reload();
                }
                },
                error: function (rs) {
                alert("Remove Cart Error !")
                }
                });
                });*@
                });
            function loadHeaderCart() {
                $('#miniCart').load("/AjaxContent/HeaderCart");
                $('#numberCart').load("/AjaxContent/NumberCart");
            }
        });
    </script>
}